<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="content-type" charset="UTF-8">
        <title>Harjoitukset 6: Tehtävä 3</title>
        <style>
            #divToDrop {
	           width:800px;
	           height:400px;
	           background-color:#FFF;
	           border:1px solid #000000;
	           margin:5px;
            }
            .thumbnail {
                height: 125px;
                border: 1px solid #000000;
                margin: 2px 2px 0 0;
            }
        </style>
    </head>
    <body onload="init()">
        <div><h1>Drag and Drop Images Example</h1></div>
        <p>Drag images from desktop into the rectangle</p>

        <div id="divToDrop" ondrop="drop(event)" ondragover="allowDrop(event)"></div>

    <script>
        // By default, data/elements cannot be dropped in other elements
        // To allow a drop, prevent the default handling of the element
        function allowDrop(event) {
            event.preventDefault();
        };
        
        function drop(event) {
            // prevent the browser default handling of the data
	       event.stopPropagation();
            event.preventDefault();
            var files = event.dataTransfer.files; //array of all files
            for (var i=0, file; file=files[i]; i++) {
                if (file.type.match(/image.*/)) {
                    var reader = new FileReader();

                    reader.onload = function(e2) {
                        // finished reading file data.
                        //var img = document.createElement('img');
                        //img.src= e2.target.result;
                       var span = document.createElement('span');
                        span.innerHTML = ['<img class="thumbnail" src="', e2.target.result,'" title="', escape(theFile.name), '"/>'].join(''); document.getElementById("divToDrop").appendChild(span);
                    }

                reader.readAsDataURL(file); // start reading the file data.
            }
        };
            
        function init() {
            
        };
    </script>   
    </body>
</html>